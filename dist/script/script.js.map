{"version":3,"sources":["santa-battle.js"],"names":["santaBattle","opts","scoreList","startBtnId","resetBtnId","scoreScreen","scoreScreenSmallClass","loadViewTarget","loadView","player","level","pieces","html","hiddenClass","collectedPieces","$","init","prototype","buildPiece","obj","piece","id","class","type","copyObj","copy","constructor","attr","hasOwnProperty","bindPlayerControls","document","addEventListener","idKey","bind","e","keyCode","keyPressedUp","keyUp","keyDown","keyLeft","keyRight","idKeyUp","clearKey","_","setInterval","movePlayer","keyPressedDown","keyPressedLeft","keyPressedRight","value","clearInterval","dir","top","left","scrollHeight","target","setPlayerPos","loadPlayer","append","css","selectPiece","weightSum","i","piecesList","length","weight","index","Math","floor","random","j","loadPiece","pieceSetup","pieceLoadView","pieceTarget","removeFn","topPos","clientHeight","leftPos","clientWidth","anim","pieceAnim","animLeft","offsetLeft","initPieces","loadedPieces","count","push","removeLoadedPiece","ele","getElementById","parentNode","removeChild","splice","initCollisionWatch","collisionWatch","collisionTest","identifyPiecePositions","positionData","closePieces","getClosePieces","result","identifyCollision","resultAction","collectPoints","addPieceToCollection","endGame","score","points","x","width","y","height","array","pos","getBoundingClientRect","preparePiecesList","smallScoreScreen","addClass","largeScoreScreen","bindLoadBtns","startBtn","startGame","resetBtn","resetGame","optsTargets","game","inlineClass","presents","total","chimney"],"mappings":"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","file":"script.js","sourcesContent":["var santaBattle = function(opts){\r\n\r\n\tthis.opts = {};\r\n\tthis.opts.scoreList = opts.scoreList;\r\n\tthis.opts.startBtnId = opts.startBtnId;\r\n\tthis.opts.resetBtnId = opts.resetBtnId;\r\n\tthis.opts.scoreScreen = opts.scoreScreen;\r\n\tthis.opts.scoreScreenSmallClass = opts.scoreScreenSmallClass;\r\n\tthis.opts.loadViewTarget = opts.loadView || false;\r\n\tthis.opts.player = opts.player || false;\r\n\tthis.opts.level = opts.level || 1;\r\n\tthis.opts.pieces = opts.pieces;\r\n\tthis.html = opts.html;\r\n\r\n\tthis.hiddenClass = \"visually-hidden\";\r\n\r\n\tthis.collectedPieces = [];\r\n\r\n\tif(this.opts.loadViewTarget && this.opts.player){\r\n\t\tthis.loadView = $(this.opts.loadViewTarget);\r\n\t\tthis.init();\r\n\t};\r\n};\r\n\r\n/* Services */\r\n\r\nsantaBattle.prototype.buildPiece = function(obj){\r\n\tvar piece = '<div';\r\n\tif(obj.id)piece += ' id=\"' + obj.id + '\"';\r\n\tif(obj.class)piece += ' class=\"' + obj.class + '\"';\r\n\tif(obj.type)piece += ' data-type=\"' + obj.type + '\"';\r\n\tpiece += '></div>';\r\n\treturn piece;\r\n};\r\n\r\nsantaBattle.prototype.copyObj = function (obj) {\r\n    var copy = obj.constructor();\r\n    for (var attr in obj) {\r\n        if (obj.hasOwnProperty(attr)) copy[attr] = obj[attr];\r\n    }\r\n    return copy;\r\n};\r\n\r\n/* Controls */\r\n\r\nsantaBattle.prototype.bindPlayerControls = function(){\r\n\tdocument.addEventListener(\"keydown\", this.idKey.bind(this), false);\r\n\tdocument.addEventListener(\"keyup\", this.idKey.bind(this), false);\r\n};\r\n\r\nsantaBattle.prototype.idKey = function(e){\r\n\r\n\tswitch(e.keyCode){\r\n\t\tcase 38: // arrow up\r\n\t\tcase 87: // w\r\n\t\t\tif(this.keyPressedUp){\r\n\t\t\t\tthis.keyUp();\r\n\t\t\t};\t\t\t\r\n\t\tbreak;\r\n\t\tcase 40: // down\r\n\t\tcase 83: // s\r\n\t\t\tthis.keyDown();\r\n\t\tbreak;\r\n\t\tcase 37: // left\r\n\t\tcase 65: // a\r\n\t\t\tthis.keyLeft();\r\n\t\tbreak;\r\n\t\tcase 39: // right\r\n\t\tcase 68: // d\r\n\t\t\tthis.keyRight();\r\n\t\tbreak;\r\n\t\tcase 32: // space\r\n\r\n\t\tbreak;\r\n\t};\r\n};\r\n\r\nsantaBattle.prototype.idKeyUp = function(e){\r\n\tswitch(e.keyCode){\r\n\t\tcase 38: // arrow up\r\n\t\tcase 87: // w\r\n\t\t\tthis.clearKey('Up');\r\n\t\tbreak;\r\n\t\tcase 40: // down\r\n\t\tcase 83: // s\r\n\t\t\tthis.clearKey('Down');\r\n\t\tbreak;\r\n\t\tcase 37: // left\r\n\t\tcase 65: // a\r\n\t\t\tthis.clearKey('Left');\r\n\t\tbreak;\r\n\t\tcase 39: // right\r\n\t\tcase 68: // d\r\n\t\t\tthis.clearKey('Right');\r\n\t\tbreak;\r\n\t\tcase 32: // space\r\n\r\n\t\tbreak;\r\n\t};\r\n};\r\n\r\n/* Player Actions */\r\n\r\nsantaBattle.prototype.keyUp = function(){\r\n\tvar _ = this;\r\n\tthis.keyPressedUp = setInterval(this.movePlayer('up'), 500);\r\n};\r\n\r\nsantaBattle.prototype.keyDown = function(){\r\n\tvar _ = this;\r\n\tthis.keyPressedDown = setInterval(this.movePlayer('down'), 500);\r\n};\r\n\r\nsantaBattle.prototype.keyLeft = function(){\r\n\tvar _ = this;\r\n\tthis.keyPressedLeft = setInterval(this.movePlayer('left'), 500);\r\n};\r\n\r\nsantaBattle.prototype.keyRight = function(){\r\n\tvar _ = this;\r\n\tthis.keyPressedRight = setInterval(this.movePlayer('right'), 500);\r\n};\r\n\r\nsantaBattle.prototype.clearKey = function(value){\r\n\tvar _ = this;\r\n\tclearInterval(_[\"keyPressed\" + value]);\r\n};\r\n\r\nsantaBattle.prototype.movePlayer = function(dir){\r\n\tswitch(dir){\r\n\t\tcase 'up':\r\n\t\t\tthis.player.top -= 20;\r\n\t\tbreak;\r\n\t\tcase 'down':\r\n\t\t\tthis.player.top += 20;\r\n\t\tbreak;\r\n\t\tcase 'left':\r\n\t\t\tthis.player.left -= 20;\r\n\t\tbreak;\r\n\t\tcase 'right':\r\n\t\t\tthis.player.left += 20;\r\n\t\tbreak;\r\n\t}\r\n\r\n\tif(this.player.top < 0) this.player.top = 0;\r\n\tif(this.player.left < 0) this.player.left = 0;\r\n\r\n\tif(this.player.top > (this.loadView[0].scrollHeight - this.player.target[0].scrollHeight)) this.player.top = this.loadView[0].scrollHeight - this.player.target[0].scrollHeight;\r\n\r\n\tthis.setPlayerPos();\r\n};\r\n\r\nsantaBattle.prototype.loadPlayer = function(){\r\n\tvar html = this.buildPiece(this.opts.player);\r\n\tthis.loadView.append(html);\r\n\tthis.player = {\r\n\t\ttarget:$('#' + this.opts.player.id),\r\n\t\ttop:300,\r\n\t\tleft:0\r\n\t};\r\n\tthis.setPlayerPos();\r\n};\r\n\r\nsantaBattle.prototype.setPlayerPos = function(top, left){\r\n\tthis.player.target.css({\r\n\t\ttop:this.player.top + 'px',\r\n\t\tleft:this.player.left + 'px'\r\n\t});\r\n};\r\n\r\n/* Loading Pieces */\r\n\r\nsantaBattle.prototype.selectPiece = function (){\r\n\t// add up all the weights\r\n\tvar weightSum = 0;\r\n\tfor(var i = 0; i < this.piecesList.length; i++){\r\n\t\tweightSum+= this.piecesList[i].weight;\r\n\t};\r\n\r\n\twhile(weightSum > 0){\r\n\r\n\t\t// select random piece index\r\n\r\n\t\tvar index = Math.floor(Math.random() * Math.floor(this.piecesList.length - 1));\r\n\r\n\t\t// select random piece index\r\n\r\n\t\tweightSum -= this.piecesList[index].weight;\r\n\r\n\t\tif(weightSum > 0){\r\n\t\t\tfor(var j = 0; j < this.piecesList.length; j++){\r\n\t\t\t\tif(this.piecesList[j].weight === weightSum){\r\n\t\t\t\t\treturn this.copyObj(this.piecesList[j]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\treturn false;\r\n};\r\n\r\nsantaBattle.prototype.loadPiece = function (obj){\r\n\tvar html = this.buildPiece(obj);\r\n\tthis.loadView.append(html);\r\n};\r\n\r\n/* Piece setup functions (new instance required) */\r\n\r\nsantaBattle.prototype.pieceSetup = function(opts){\r\n\r\n\tthis.piece = opts.piece;\r\n\tthis.pieceLoadView = opts.loadView;\r\n\tthis.pieceTarget = $('#' + this.piece.id);\r\n\tthis.removeFn = opts.removeFn;\r\n\r\n\tvar topPos = Math.floor(Math.random() * Math.floor(this.pieceLoadView[0].clientHeight - this.pieceTarget[0].clientHeight)),\r\n\t\tleftPos = this.pieceLoadView[0].clientWidth - this.pieceTarget[0].clientWidth;\r\n\r\n\tthis.pieceTarget.css({\r\n\t\ttop: topPos + \"px\",\r\n\t\tleft: leftPos + \"px\"\r\n\t});\r\n\r\n\tthis.anim();\r\n};\r\n\r\nsantaBattle.prototype.pieceSetup.prototype.anim = function(){\r\n\tvar _ = this;\r\n\tthis.pieceAnim = setInterval(_.animLeft.bind(_),1);\r\n};\r\n\r\nsantaBattle.prototype.pieceSetup.prototype.animLeft = function(){\r\n\tthis.pieceTarget.css({\r\n\t\tleft: this.pieceTarget[0].offsetLeft - 1 + \"px\"\r\n\t});\r\n\r\n\tif(this.pieceTarget[0].offsetLeft <= -this.pieceTarget[0].clientWidth){\r\n\t\tthis.removeFn(this.piece.id);\r\n\t\tclearInterval(this.pieceAnim);\r\n\t};\r\n};\r\n\r\n/**************************************************/\r\n\r\nsantaBattle.prototype.initPieces = function (){\r\n\tthis.loadedPieces = [];\r\n\tvar count = 0;\r\n\r\n\tvar _ = this;\r\n\r\n\tsetInterval(function(){\r\n\t\tvar piece = _.selectPiece();\r\n\t\tif(piece){\r\n\t\t\tcount += 1;\r\n\t\t\tpiece.id = 'piece' + count;\r\n\t\t\t_.loadPiece(piece);\r\n\t\t\t_.loadedPieces.push(piece);\r\n\r\n\t\t\t// Create new instance for piece setup and animations\r\n\t\t\tthis[\"activePiece\" + piece.id] = new _.pieceSetup({\r\n\t\t\t\tpiece:piece,\r\n\t\t\t\tloadView: _.loadView,\r\n\t\t\t\tremoveFn: _.removeLoadedPiece.bind(_)\r\n\t\t\t});\r\n\t\t};\r\n\t}, 500); // random interval depending on level\r\n};\r\n\r\nsantaBattle.prototype.removeLoadedPiece = function (id){\r\n\tfor(var i = 0; i < this.loadedPieces.length; i++){\r\n\t\tif(this.loadedPieces[i].id === id){\r\n\t\t\tvar ele = document.getElementById(this.loadedPieces[i].id);\r\n\t\t\t\tele.parentNode.removeChild(ele);\r\n\t\t\tthis.loadedPieces.splice(i,1);\r\n\t\t\treturn;\r\n\t\t};\r\n\t};\r\n};\r\n\r\n\r\nsantaBattle.prototype.initCollisionWatch = function(){\r\n\tvar _ = this;\r\n\tthis.collisionWatch = setInterval(_.collisionTest.bind(_),10);\r\n};\r\n\r\n\r\nsantaBattle.prototype.collisionTest = function(){\r\n\tthis.identifyPiecePositions();\r\n\tthis.positionData(this.opts.player);\r\n\tthis.closePieces = this.getClosePieces();\r\n\tthis.result = this.identifyCollision();\r\n\tif(this.result) this.resultAction();\r\n};\r\n\r\nsantaBattle.prototype.resultAction = function(){\r\n\tswitch(this.result.type){\r\n\t\tcase \"collectable\":\r\n\t\t\tthis.removeLoadedPiece(this.result.id);\r\n\t\t\tthis.collectPoints();\r\n\t\t\tthis.addPieceToCollection();\r\n\t\tbreak;\t\r\n\t\tcase \"points\":\r\n\t\t\tthis.removeLoadedPiece(this.result.id);\r\n\t\t\tthis.collectPoints();\r\n\t\tbreak;\r\n\t\tcase \"baddie\":\r\n\t\t\tthis.endGame();\r\n\t\tbreak;\r\n\t}\r\n};\r\n\r\nsantaBattle.prototype.addPieceToCollection = function(){\r\n\tthis.collectedPieces.push(this.result);\r\n};\r\n\r\nsantaBattle.prototype.collectPoints = function(){\r\n\tthis.score += this.result.points;\r\n};\r\n\r\nsantaBattle.prototype.endGame = function(){\r\n\r\n};\r\n\r\nsantaBattle.prototype.identifyCollision = function(){\r\n\tfor(var i = 0; i < this.closePieces.length; i++){\r\n\t\tvar piece = this.closePieces[i];\r\n\r\n\t\tif(\r\n\t\t\tthis.opts.player.x + this.opts.player.width >= piece.x &&\r\n\t\t\tthis.opts.player.x < piece.x + piece.width &&\r\n\t\t\tthis.opts.player.y + this.opts.player.height > piece.y &&\r\n\t\t\tthis.opts.player.y < piece.y + piece.height\r\n\t\t){\r\n\t\t\treturn piece;\r\n\t\t};\r\n\t};\r\n\treturn false;\r\n};\r\n\r\nsantaBattle.prototype.getClosePieces = function(){\r\n\tvar array = [];\r\n\r\n\tfor(var i = 0; i < this.loadedPieces.length; i++){\r\n\t\tif(this.loadedPieces[i].x < this.opts.player.x + this.opts.player.width + 10){\r\n\t\t\tarray.push(this.copyObj(this.loadedPieces[i]));\r\n\t\t};\r\n\t};\r\n\treturn array;\r\n};\r\n\r\nsantaBattle.prototype.identifyPiecePositions = function(){\r\n\tfor(var i = 0; i < this.loadedPieces.length; i++){\r\n\t\tthis.positionData(this.loadedPieces[i]);\r\n\t};\r\n};\r\n\r\nsantaBattle.prototype.positionData = function(obj){\r\n\tvar target = $(\"#\" + obj.id),\r\n\t\tpos = target[0].getBoundingClientRect();\r\n\tobj.width = target[0].clientWidth;\r\n\tobj.height = target[0].clientHeight;\r\n\tobj.y = Math.floor(pos.top);\r\n\tobj.x = Math.floor(pos.left);\r\n};\r\n\r\nsantaBattle.prototype.preparePiecesList = function(){\r\n\tthis.piecesList = [];\r\n\tfor(var i = 0; i < this.opts.pieces.length; i++){\r\n\t\tfor(var j = 0; j < (this.opts.pieces[i].weight * 2); j++){\r\n\t\t\tthis.piecesList.push(this.copyObj(this.opts.pieces[i]));\r\n\t\t}\r\n\t}\r\n};\r\n\r\n/* Init functions */\r\n\r\nsantaBattle.prototype.smallScoreScreen = function(){\r\n\tthis.scoreScreen.addClass(this.opts.scoreScreenSmallClass);\r\n};\r\n\r\nsantaBattle.prototype.largeScoreScreen = function(){\r\n\r\n};\r\n\r\nsantaBattle.prototype.bindLoadBtns = function(){\r\n\tvar _ = this;\r\n\t\r\n\tthis.startBtn.addEventListener('click', function(){\r\n\t\t_.smallScoreScreen();\r\n\t\t_.startGame();\r\n\t});\r\n\r\n\tthis.resetBtn.addEventListener('click', function(){\r\n\t\t_.resetGame();\r\n\t});\r\n};\r\n\r\nsantaBattle.prototype.optsTargets = function(){\r\n\tthis.scoreScreen = $(this.opts.scoreScreen);\r\n\tthis.startBtn = document.getElementById(this.opts.startBtnId);\t\r\n\tthis.resetBtn = document.getElementById(this.opts.resetBtnId);\r\n};\r\n\r\nsantaBattle.prototype.init = function(){\r\n\tthis.optsTargets();\r\n\tthis.bindLoadBtns();\r\n};\r\n\r\nsantaBattle.prototype.startGame = function(){\r\n\tthis.loadPlayer();\r\n\tthis.bindPlayerControls();\r\n\tthis.preparePiecesList();\r\n\tthis.initPieces();\r\n\tthis.initCollisionWatch();\r\n};\r\n\r\n(function(){\r\n\r\n\t$(function(){\r\n\t\tconst game = new santaBattle({\r\n\t\t\tloadView:'#santaBattle',\r\n\t\t\tscoreScreen: '.c-score-screen',\r\n\t\t\tscoreScreenSmallClass: 'c-score-screen--small',\r\n\t\t\tscoreList:{\r\n\t\t\t\ttarget:'.c-scores',\r\n\t\t\t\tinlineClass:'.c-scores--inline',\r\n\t\t\t\tlevel:'c-scores__level',\r\n\t\t\t\tpresents:'c-scores__presents',\r\n\t\t\t\ttotal:'c-scores__total'\r\n\t\t\t},\r\n\t\t\tstartBtnId: 'startBtn',\r\n\t\t\tresetBtnId:'resetBtn',\r\n\t\t\tplayer: {\r\n\t\t\t\tid:'player1',\r\n\t\t\t\tclass:'c-santa'\r\n\t\t\t},\r\n\t\t\tlevel:1,\r\n\t\t\tpieces:[\r\n\t\t\t\t{\r\n\t\t\t\t\tclass:\"c-piece c-piece--present\",\r\n\t\t\t\t\tpoints:10,\r\n\t\t\t\t\ttype:\"collectable\",\r\n\t\t\t\t\tweight:5\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tclass:\"c-piece c-piece--bonus\",\r\n\t\t\t\t\tpoints:50,\r\n\t\t\t\t\ttype:\"points\",\r\n\t\t\t\t\tweight:1\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tclass:\"c-piece c-piece--old-boot\",\r\n\t\t\t\t\ttype:\"baddie\",\r\n\t\t\t\t\tweight:3\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tclass:\"c-piece c-piece--evil-elf\",\r\n\t\t\t\t\ttype:\"baddie\",\r\n\t\t\t\t\tweight:4\r\n\t\t\t\t}\r\n\t\t\t],\r\n\t\t\tchimney:{\r\n\t\t\t\tclass:\"c-chimney\",\r\n\t\t\t\ttype:\"catcher\",\r\n\t\t\t\tweight:1,\r\n\t\t\t\tpoints:30\r\n\t\t\t}\r\n\t\t});\r\n\t});\r\n})();"]}